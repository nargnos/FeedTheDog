<?xml version="1.0" encoding="utf-8"?>
<modelStoreModel xmlns:dm0="http://schemas.microsoft.com/VisualStudio/2008/DslTools/Core" xmlns:dm1="http://schemas.microsoft.com/dsltools/Kernel" xmlns:dm2="http://schemas.microsoft.com/dsltools/Component" xmlns:dm3="http://schemas.microsoft.com/dsltools/Activity" xmlns:dm4="http://schemas.microsoft.com/dsltools/UseCase" xmlns:dm5="http://schemas.microsoft.com/dsltools/Interaction" xmlns:dm6="http://schemas.microsoft.com/dsltools/UmlModelLibrary" xmlns:dm7="http://schemas.microsoft.com/dsltools/UmlDiagrams" xmlns:dm8="http://schemas.microsoft.com/dsltools/LogicalClassDesigner"
  dslVersion="1.0.0.0"
  Id="ecfc5da4-da65-42f8-9db2-008e5c7b4f89"
  name="NN" xmlns="http://schemas.microsoft.com/dsltools/ModelStore">
  <ownedCommentsInternal>
    <comment
      Id="41cf20eb-4079-48f5-9a51-54e6e07eb35c">
      <body>为了载入gpu
Neural必须无虚
所以不能为同层神经元设置不同的激活函数，因为amp函数中不能用虚函数

同一layer里支持放n个layer应该可以解决这个问题
或者向amp函数传一个记录类型的tuple（不过这样的话创建layer蛮累的）</body>
    </comment>
    <comment
      Id="ec1c457c-a974-498e-9e6d-77a35ed4197d">
      <body>都静态函数，可以用继承扩展</body>
    </comment>
    <comment
      Id="2e157da5-d773-4a6b-8674-e8fb6ca359fd">
      <body>输入方式，就是上一层的数据如何输入到这层中,可对输入过滤，这样导致神经元的权数是跟它关联的</body>
    </comment>
    <comment
      Id="c05a5885-6741-4875-8f91-331c1cab9fec">
      <body>反馈网络没看到，之后可能要添加扩展</body>
    </comment>
    <comment
      Id="92682fe3-2552-41ed-a4d1-dc3807df31b2">
      <body>训练方式需要跟网络解耦
但是如果解耦的话神经元中不应该存在训练算法用到的成员变量，那么这些变量要存哪？
或者创建layer的时候做模板策略传入？
</body>
    </comment>
    <comment
      Id="f070c700-6cf8-4450-87a9-f376dd76018f">
      <body>这里继承或者组合TrainPolicy，用作算法中间变量存储</body>
    </comment>
    <comment
      Id="47add267-949d-4c7c-97b9-cbc7c28b2618">
      <body>用来处理神经元的访问，Neural不方便做接口继承</body>
    </comment>
    <comment
      Id="341317b7-8749-43d9-921b-65705678750a">
      <body>激活函数在TTransformPolicy里</body>
    </comment>
  </ownedCommentsInternal>
  <profileInstances>
    <packageHasProfileInstances
      Id="0caec977-1f8c-4ba3-a7db-8cc9ad9cc73b">
      <profileInstance
        Id="e34d544e-0fea-4ed6-ac5e-1b74119ac791"
        name="StandardProfileL2" />
    </packageHasProfileInstances>
    <packageHasProfileInstances
      Id="29349502-908c-4fda-9054-c48619c59ed0">
      <profileInstance
        Id="532ea607-fb19-44b8-8502-3351b05452be"
        name="StandardProfileL3" />
    </packageHasProfileInstances>
  </profileInstances>
  <packagedElements>
    <packageHasNamedElement>
      <class
        Id="b67c1c78-b046-4487-8eb5-f1f70dc33d88"
        name="NeuralNetwork"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false">
        <suppliersInternal>
          <dependency
            Id="f96c137e-1f19-48f7-b3bf-d21206494196">
            <classMoniker
              Id="bbfb25fc-a4ba-43c4-ad25-08f63c9be604"
              LastKnownName="Sample"
              LastKnownLocation="NN.uml" />
          </dependency>
          <dependency
            Id="137e25bb-7511-4d72-a51d-a234bb88f47e">
            <interfaceMoniker
              Id="c0c87954-4b11-410b-9a0e-5cace6776e90"
              LastKnownName="ILayerBuilder"
              LastKnownLocation="NN.uml" />
          </dependency>
        </suppliersInternal>
        <targetEnds>
          <association
            Id="f323b067-7fa7-41bf-9f5b-090324d3b41e"
            isDerived="false"
            sourceEndRoleName="NeuralNetwork"
            targetEndRoleName="Layer"
            isLeaf="false"
            isAbstract="false">
            <classMoniker
              Id="5c596596-fd4b-46af-ab70-17315b6dfc38"
              LastKnownName="Layer"
              LastKnownLocation="NN.uml" />
            <relationshipOwnedElementsInternal>
              <associationHasOwnedEnds>
                <memberEnd
                  Id="ab934025-d7c8-4a7c-9496-ec0a2ffa2595"
                  name="NeuralNetwork"
                  isLeaf="false"
                  isStatic="false"
                  isReadOnly="false"
                  isDerived="false"
                  isDerivedUnion="false"
                  aggregation="Composite"
                  isComposite="false"
                  isNavigableOwned="false" />
              </associationHasOwnedEnds>
              <associationHasOwnedEnds>
                <memberEnd
                  Id="100bbc7a-6dec-4f8b-9f42-a247397b50b4"
                  name="Layer"
                  isLeaf="false"
                  isStatic="false"
                  isReadOnly="false"
                  isDerived="false"
                  isDerivedUnion="false"
                  aggregation="None"
                  isComposite="true">
                  <lowerValueInternal>
                    <literalString
                      Id="4f7b993e-d776-4178-917a-3b44378ce237"
                      name="Lower"
                      value="n" />
                  </lowerValueInternal>
                  <upperValueInternal>
                    <literalString
                      Id="68c6c0a4-8be3-4960-9229-9e4adc2efd11"
                      name="Upper"
                      value="n" />
                  </upperValueInternal>
                </memberEnd>
              </associationHasOwnedEnds>
            </relationshipOwnedElementsInternal>
          </association>
        </targetEnds>
        <ownedOperationsInternal>
          <operation
            Id="faf6caba-2818-4cb5-92b7-0e9b2b10d77e"
            name="Transform"
            isLeaf="false"
            isStatic="false"
            isAbstract="false"
            concurrency="Sequential"
            isQuery="false" />
          <operation
            Id="aedce9eb-005a-4d8f-ae0d-6349abf200e4"
            name="GetLayer"
            isLeaf="false"
            isStatic="false"
            isAbstract="false"
            concurrency="Sequential"
            isQuery="false" />
          <operation
            Id="2ac120b0-7b44-40c3-8977-4683fa9f0fbd"
            name="AddLayer"
            isLeaf="false"
            isStatic="false"
            isAbstract="false"
            concurrency="Sequential"
            isQuery="false" />
          <operation
            Id="c3b0018f-b744-4e35-b8b8-2f480983daf1"
            name="GetLayerCount"
            isLeaf="false"
            isStatic="false"
            isAbstract="false"
            concurrency="Sequential"
            isQuery="false" />
          <operation
            Id="82144c93-026a-41f9-b295-fa516459532e"
            name="Train"
            isLeaf="false"
            isStatic="false"
            isAbstract="false"
            concurrency="Sequential"
            isQuery="false" />
        </ownedOperationsInternal>
      </class>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <class
        Id="5c596596-fd4b-46af-ab70-17315b6dfc38"
        name="Layer"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false">
        <suppliersInternal>
          <dependency
            Id="ba19696f-d211-4785-bbae-5e1343c3fd72">
            <classMoniker
              Id="bbfb25fc-a4ba-43c4-ad25-08f63c9be604"
              LastKnownName="Sample"
              LastKnownLocation="NN.uml" />
          </dependency>
          <dependency
            Id="3f9384e8-ad02-4760-9848-9ae4bccb36a2">
            <classMoniker
              Id="769b0c91-7568-4324-8c74-c7d30c012b00"
              LastKnownName="Function"
              LastKnownLocation="NN.uml" />
          </dependency>
        </suppliersInternal>
        <generalsInternal>
          <generalization
            Id="474320c1-7461-4186-ad1b-db58cfe75851"
            isSubstitutable="false">
            <classMoniker
              Id="098bb53b-83db-43b6-9e8e-953ea6bfca57"
              LastKnownName="LayerBase"
              LastKnownLocation="NN.uml" />
          </generalization>
        </generalsInternal>
        <targetEnds>
          <association
            Id="0069b235-5766-4f36-b6c4-28a0874b3b33"
            isDerived="false"
            sourceEndRoleName="Layer"
            targetEndRoleName="Neural"
            isLeaf="false"
            isAbstract="false">
            <classMoniker
              Id="1416b2ce-a5aa-46ab-a45d-a08fad62aa2a"
              LastKnownName="Neural"
              LastKnownLocation="NN.uml" />
            <relationshipOwnedElementsInternal>
              <associationHasOwnedEnds>
                <memberEnd
                  Id="7722779b-dd27-4736-a68a-ee2d2166d33c"
                  name="Layer"
                  isLeaf="false"
                  isStatic="false"
                  isReadOnly="false"
                  isDerived="false"
                  isDerivedUnion="false"
                  aggregation="Composite"
                  isComposite="false"
                  isNavigableOwned="false" />
              </associationHasOwnedEnds>
              <associationHasOwnedEnds>
                <memberEnd
                  Id="e15ff24c-8cef-4f8c-b724-77b51d0c83bd"
                  name="Neural"
                  isLeaf="false"
                  isStatic="false"
                  isReadOnly="false"
                  isDerived="false"
                  isDerivedUnion="false"
                  aggregation="None"
                  isComposite="true">
                  <lowerValueInternal>
                    <literalString
                      Id="87e55ed9-da5b-4ff7-b60d-e29966656fb6"
                      name="Lower"
                      value="n" />
                  </lowerValueInternal>
                  <upperValueInternal>
                    <literalString
                      Id="579cef76-68fe-4ea6-b38a-e5cfdffac950"
                      name="Upper"
                      value="n" />
                  </upperValueInternal>
                </memberEnd>
              </associationHasOwnedEnds>
            </relationshipOwnedElementsInternal>
          </association>
        </targetEnds>
        <ownedRedefinableTemplateSignatureInternal>
          <redefinableTemplateSignature
            Id="6d1f8d6c-412f-4344-bcbf-a081cbf545c4"
            parameters=""
            isLeaf="false">
            <ownedParameters>
              <templateParameter
                Id="4a1960c7-f5b2-41c5-a7cb-42d840b59110">
                <ownedParameterableElement>
                  <literalInteger
                    Id="e6c965c6-ed43-4389-8aef-6a209c076fea"
                    name="TInputSize"
                    value="0" />
                </ownedParameterableElement>
              </templateParameter>
              <templateParameter
                Id="470563e5-ac80-4b4f-b54d-cbe21b039781">
                <ownedParameterableElement>
                  <literalInteger
                    Id="7fc847b7-be5b-48d4-aa17-2cb08d20c9b4"
                    name="TNeuralCount"
                    value="0" />
                </ownedParameterableElement>
              </templateParameter>
              <classifierTemplateParameter
                Id="2e1615e1-455d-48a1-8f22-2c16fdfdf246">
                <description>激活函数</description>
                <ownedParameterableElement>
                  <class
                    Id="deb1164c-861b-4e82-b5f3-1a7dd53cf215"
                    name="TTransformPolicy"
                    isAbstract="false"
                    isLeaf="false"
                    isActiveClass="false" />
                </ownedParameterableElement>
              </classifierTemplateParameter>
              <classifierTemplateParameter
                Id="f4825835-8fcf-4b7c-b0f5-b77ed95afed1">
                <ownedParameterableElement>
                  <class
                    Id="54f243a7-e180-40d0-9a55-46b36b50a161"
                    name="TTrainPolicy"
                    isAbstract="false"
                    isLeaf="false"
                    isActiveClass="false" />
                </ownedParameterableElement>
              </classifierTemplateParameter>
              <classifierTemplateParameter
                Id="90a4cadd-0bbe-479f-827c-db07e28d1fd4">
                <ownedParameterableElement>
                  <class
                    Id="4fe7c866-95d8-4abe-bd72-977683b75e07"
                    name="TInputPolicy"
                    isAbstract="false"
                    isLeaf="false"
                    isActiveClass="false" />
                </ownedParameterableElement>
              </classifierTemplateParameter>
            </ownedParameters>
          </redefinableTemplateSignature>
        </ownedRedefinableTemplateSignatureInternal>
      </class>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <Interface
        Id="d30ba40c-d267-4d8b-8059-9063c5c111a6"
        name="ILayer"
        isAbstract="false"
        isLeaf="false">
        <suppliersInternal>
          <dependency
            Id="0f9c05bc-b443-4118-8ed5-f23a0f5546d5">
            <interfaceMoniker
              Id="b68bad06-3e31-4102-83cb-2411e9477f6a"
              LastKnownName="INeuralProxy"
              LastKnownLocation="NN.uml" />
          </dependency>
        </suppliersInternal>
        <ownedOperations>
          <operation
            Id="a4e0e0bc-b4a8-4be8-a4c9-d3c640076eaa"
            name="GetInputSize"
            isLeaf="false"
            isStatic="false"
            isAbstract="true"
            concurrency="Sequential"
            isQuery="false" />
          <operation
            Id="620187a7-df3a-4066-ba70-f96bf5bf2081"
            name="GetNeuralCount"
            isLeaf="false"
            isStatic="false"
            isAbstract="true"
            concurrency="Sequential"
            isQuery="false" />
          <operation
            Id="5f231935-fca9-40e4-8e9a-e53f0492f15e"
            name="Transform"
            isLeaf="false"
            isStatic="false"
            isAbstract="true"
            concurrency="Sequential"
            isQuery="false" />
          <operation
            Id="e49ba5b1-aee6-4074-a963-967cecdd767b"
            name="Train"
            isLeaf="false"
            isStatic="false"
            isAbstract="true"
            concurrency="Sequential"
            isQuery="false" />
          <operation
            Id="8acdea8d-b219-4fbb-a2af-6857d803201d"
            name="GetNeural"
            isLeaf="false"
            isStatic="false"
            isAbstract="true"
            concurrency="Sequential"
            isQuery="false" />
        </ownedOperations>
      </Interface>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <class
        Id="1416b2ce-a5aa-46ab-a45d-a08fad62aa2a"
        name="Neural"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false">
        <suppliersInternal>
          <dependency
            Id="7891a97a-5c90-4731-9ee5-1d40017930fa">
            <classMoniker
              Id="769b0c91-7568-4324-8c74-c7d30c012b00"
              LastKnownName="Function"
              LastKnownLocation="NN.uml" />
          </dependency>
        </suppliersInternal>
        <ownedRedefinableTemplateSignatureInternal>
          <redefinableTemplateSignature
            Id="fd201696-3251-4733-a022-cdf6aa2f0574"
            parameters=""
            isLeaf="false">
            <ownedParameters>
              <templateParameter
                Id="ff62fb21-4483-4f44-897b-ab5b13709fe8">
                <ownedParameterableElement>
                  <literalInteger
                    Id="3332f3cd-97df-4bdf-84e6-39aec279c5a8"
                    name="TWeightSize"
                    value="0" />
                </ownedParameterableElement>
              </templateParameter>
            </ownedParameters>
          </redefinableTemplateSignature>
        </ownedRedefinableTemplateSignatureInternal>
        <ownedAttributesInternal>
          <property
            Id="de13ed9b-55a0-4353-a9a7-ea3890df5cd2"
            name="Weight"
            isLeaf="false"
            isStatic="false"
            isReadOnly="false"
            isUnique="false"
            isDerived="false"
            isDerivedUnion="false"
            aggregation="None"
            isComposite="false" />
          <property
            Id="af8f9b5b-953d-4f94-bc4b-5e009c5f5b25"
            name="Threshold"
            isLeaf="false"
            isStatic="false"
            isReadOnly="false"
            isUnique="false"
            isDerived="false"
            isDerivedUnion="false"
            aggregation="None"
            isComposite="false" />
        </ownedAttributesInternal>
      </class>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <class
        Id="bbfb25fc-a4ba-43c4-ad25-08f63c9be604"
        name="Sample"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false">
        <suppliersInternal>
          <interfaceRealization
            Id="c8e067b8-d038-42b5-935c-9d8f232604c8">
            <interfaceMoniker
              Id="29d7dde1-0602-4895-8728-3ba5ec703298"
              LastKnownName="ISample"
              LastKnownLocation="NN.uml" />
          </interfaceRealization>
        </suppliersInternal>
        <ownedAttributesInternal>
          <property
            Id="995cd01f-c6e1-43ff-be5c-992407d8fee8"
            name="Input"
            isLeaf="false"
            isStatic="false"
            isReadOnly="false"
            isUnique="false"
            isDerived="false"
            isDerivedUnion="false"
            aggregation="None"
            isComposite="false" />
          <property
            Id="79bb6372-c188-4270-a59b-3216c99ca6be"
            name="Desire"
            isLeaf="false"
            isStatic="false"
            isReadOnly="false"
            isUnique="false"
            isDerived="false"
            isDerivedUnion="false"
            aggregation="None"
            isComposite="false" />
        </ownedAttributesInternal>
      </class>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <Interface
        Id="29d7dde1-0602-4895-8728-3ba5ec703298"
        name="ISample"
        isAbstract="false"
        isLeaf="false" />
    </packageHasNamedElement>
    <packageHasNamedElement>
      <undefinedType
        Id="46f12264-3536-4f3f-9030-c5577167cd7c"
        name="int" />
    </packageHasNamedElement>
    <packageHasNamedElement>
      <class
        Id="098bb53b-83db-43b6-9e8e-953ea6bfca57"
        name="LayerBase"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false">
        <suppliersInternal>
          <interfaceRealization
            Id="a9a448cd-fff3-4a31-89bf-a6f6323c54e4">
            <interfaceMoniker
              Id="d30ba40c-d267-4d8b-8059-9063c5c111a6"
              LastKnownName="ILayer"
              LastKnownLocation="NN.uml" />
          </interfaceRealization>
        </suppliersInternal>
        <ownedOperationsInternal>
          <operation
            Id="00dad2cb-b6fe-43fb-9e8c-73c954523ffb"
            name="GetInputSize"
            isLeaf="false"
            isStatic="false"
            isAbstract="false"
            concurrency="Sequential"
            isQuery="false" />
          <operation
            Id="0057d909-db36-4417-9357-a0245f68ce43"
            name="GetNeuralCount"
            isLeaf="false"
            isStatic="false"
            isAbstract="false"
            concurrency="Sequential"
            isQuery="false" />
          <operation
            Id="b1ae4aa9-b433-4fb2-a20b-38327e87211e"
            name="Transform"
            isLeaf="false"
            isStatic="false"
            isAbstract="false"
            concurrency="Sequential"
            isQuery="false" />
          <operation
            Id="67982614-3a20-4fdf-b11b-96ec000016a2"
            name="Train"
            isLeaf="false"
            isStatic="false"
            isAbstract="false"
            concurrency="Sequential"
            isQuery="false" />
          <operation
            Id="80ece4d6-2d9c-4f8c-8133-1fe44fc63e0a"
            name="GetNeural"
            isLeaf="false"
            isStatic="false"
            isAbstract="false"
            concurrency="Sequential"
            isQuery="false" />
        </ownedOperationsInternal>
      </class>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <class
        Id="c4a9e731-e991-4b99-9eb6-b3bd29dd9e3b"
        name="LayerBuilder"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false">
        <description>用来生成有随机权的层</description>
        <suppliersInternal>
          <interfaceRealization
            Id="46f5bb09-c708-4eff-a398-a9d1a22663e2">
            <interfaceMoniker
              Id="c0c87954-4b11-410b-9a0e-5cace6776e90"
              LastKnownName="ILayerBuilder"
              LastKnownLocation="NN.uml" />
          </interfaceRealization>
          <dependency
            Id="217fc083-fd7a-459f-9463-d4b7f3d5ec21">
            <classMoniker
              Id="5c596596-fd4b-46af-ab70-17315b6dfc38"
              LastKnownName="Layer"
              LastKnownLocation="NN.uml" />
          </dependency>
        </suppliersInternal>
        <ownedOperationsInternal>
          <operation
            Id="2424b13b-98fb-4c37-8309-8f6cffa29ffb"
            name="Build"
            isLeaf="false"
            isStatic="false"
            isAbstract="false"
            concurrency="Sequential"
            isQuery="false" />
        </ownedOperationsInternal>
      </class>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <class
        Id="769b0c91-7568-4324-8c74-c7d30c012b00"
        name="Function"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false" />
    </packageHasNamedElement>
    <packageHasNamedElement>
      <Interface
        Id="b68bad06-3e31-4102-83cb-2411e9477f6a"
        name="INeuralProxy"
        isAbstract="false"
        isLeaf="false" />
    </packageHasNamedElement>
    <packageHasNamedElement>
      <class
        Id="1e2fea19-2202-4faf-9630-53fca9f9fdf6"
        name="NeuralProxy"
        isAbstract="false"
        isLeaf="false"
        isActiveClass="false">
        <suppliersInternal>
          <interfaceRealization
            Id="f16573ba-b103-4924-9bc1-377194b41c58">
            <interfaceMoniker
              Id="b68bad06-3e31-4102-83cb-2411e9477f6a"
              LastKnownName="INeuralProxy"
              LastKnownLocation="NN.uml" />
          </interfaceRealization>
          <dependency
            Id="ecb61bb5-6f57-483d-97d9-a0a1937441db">
            <classMoniker
              Id="1416b2ce-a5aa-46ab-a45d-a08fad62aa2a"
              LastKnownName="Neural"
              LastKnownLocation="NN.uml" />
          </dependency>
        </suppliersInternal>
        <ownedRedefinableTemplateSignatureInternal>
          <redefinableTemplateSignature
            Id="07cbf6eb-5250-4b4f-931b-569b34bdfc8e"
            parameters=""
            isLeaf="false">
            <ownedParameters>
              <classifierTemplateParameter
                Id="743c6d9a-278e-4581-b9bf-2d1257fb4d08">
                <ownedParameterableElement>
                  <class
                    Id="a45beec6-9c9c-4af1-9fee-ca570ea9d166"
                    name="TNeural"
                    isAbstract="false"
                    isLeaf="false"
                    isActiveClass="false" />
                </ownedParameterableElement>
              </classifierTemplateParameter>
            </ownedParameters>
          </redefinableTemplateSignature>
        </ownedRedefinableTemplateSignatureInternal>
      </class>
    </packageHasNamedElement>
    <packageHasNamedElement>
      <Interface
        Id="c0c87954-4b11-410b-9a0e-5cace6776e90"
        name="ILayerBuilder"
        isAbstract="false"
        isLeaf="false">
        <ownedOperations>
          <operation
            Id="2ef3feaa-884f-417e-be37-9317365ed8ff"
            name="Build"
            isLeaf="false"
            isStatic="false"
            isAbstract="true"
            concurrency="Sequential"
            isQuery="false" />
        </ownedOperations>
      </Interface>
    </packageHasNamedElement>
  </packagedElements>
  <primitiveType
    Id="220a3521-e091-4221-bae9-3ef9018e845c"
    name="Integer"
    isAbstract="false"
    isLeaf="false" />
  <primitiveType
    Id="8943dc84-709e-4f62-b15a-a3273aa6f165"
    name="Boolean"
    isAbstract="false"
    isLeaf="false" />
  <primitiveType
    Id="59259974-6d55-42c6-b7bd-763d77ac8ef9"
    name="String"
    isAbstract="false"
    isLeaf="false" />
  <primitiveType
    Id="3ab42e7d-4969-445a-b209-471f5cb8209c"
    name="UnlimitedNatural"
    isAbstract="false"
    isLeaf="false" />
</modelStoreModel>